library(ggplot2)
library(maps)
library(dplyr)
library(plyr)
data.neic <- read.table("../../2014_NEIC_declustered.c4.csv", header = TRUE, sep = ",")
data.anss <- read.table("../../anss.csv", header = TRUE, sep = ",")
colnames(data.anss) <- c("datetime","lat","lon","dp.km","mag","magtype","nbstations", "gap", "distance", "rms", "source", "eventid")
stations.iris <- read.table("../../out_fetchmdata_sept15", header = FALSE, sep = "|")
colnames(stations.iris) <- c("net","sta","loc","chan","lat","lon","elev","depth","azimuth","dip","instrument","scale","scalefreq","scaleunits","samplerate","start","end")
# Magnitude to mw
data.anss$emw <- ifelse(data.anss$magtype == "ML", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mb", 0.7813*data.anss$mag + 1.5175,
ifelse(data.anss$magtype == "Md", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mx", -1,
ifelse(data.anss$magtype == "Mh", -1,
ifelse(data.anss$magtype == "Mc",0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Unk", -1, -2)))))))
#FIXME: Why do I have bad values?
data.anss <- subset(data.anss, data.anss$emw > 0)
# Date formatting
data.neic$datetime <- ISOdatetime(data.neic$y, data.neic$m, data.neic$d, data.neic$h, data.neic$m.1, data.neic$s, tz = "")
stations.iris$start <- strptime(stations.iris$start,format="%Y-%m-%dT%H:%M:%OS")
stations.iris$end <- strptime(stations.iris$end,format="%Y-%m-%dT%H:%M:%OS")
#add miliseconds to format
stations.iris$start <- options(digits.secs=3)
stations.iris$end  <- options(digits.secs=3)
library(ggplot2)
library(maps)
library(dplyr)
library(plyr)
data.neic <- read.table("../../2014_NEIC_declustered.c4.csv", header = TRUE, sep = ",")
data.anss <- read.table("../../anss.csv", header = TRUE, sep = ",")
colnames(data.anss) <- c("datetime","lat","lon","dp.km","mag","magtype","nbstations", "gap", "distance", "rms", "source", "eventid")
stations.iris <- read.table("../../out_fetchmdata_sept15", header = FALSE, sep = "|")
colnames(stations.iris) <- c("net","sta","loc","chan","lat","lon","elev","depth","azimuth","dip","instrument","scale","scalefreq","scaleunits","samplerate","start","end")
# Magnitude to mw
data.anss$emw <- ifelse(data.anss$magtype == "ML", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mb", 0.7813*data.anss$mag + 1.5175,
ifelse(data.anss$magtype == "Md", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mx", -1,
ifelse(data.anss$magtype == "Mh", -1,
ifelse(data.anss$magtype == "Mc",0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Unk", -1, -2)))))))
#FIXME: Why do I have bad values?
data.anss <- subset(data.anss, data.anss$emw > 0)
# Date formatting
data.neic$datetime <- ISOdatetime(data.neic$y, data.neic$m, data.neic$d, data.neic$h, data.neic$m.1, data.neic$s, tz = "")
stations.iris$start <- strptime(stations.iris$start,format="%Y-%m-%dT%H:%M:%OS")
stations.iris$end <- strptime(stations.iris$end,format="%Y-%m-%dT%H:%M:%OS")
library(ggplot2)
library(maps)
library(dplyr)
library(plyr)
data.neic <- read.table("../../2014_NEIC_declustered.c4.csv", header = TRUE, sep = ",")
data.anss <- read.table("../../anss.csv", header = TRUE, sep = ",")
colnames(data.anss) <- c("datetime","lat","lon","dp.km","mag","magtype","nbstations", "gap", "distance", "rms", "source", "eventid")
stations.iris <- read.table("../../out_fetchmdata_sept15", header = FALSE, sep = "|")
colnames(stations.iris) <- c("net","sta","loc","chan","lat","lon","elev","depth","azimuth","dip","instrument","scale","scalefreq","scaleunits","samplerate","start","end")
# Magnitude to mw
data.anss$emw <- ifelse(data.anss$magtype == "ML", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mb", 0.7813*data.anss$mag + 1.5175,
ifelse(data.anss$magtype == "Md", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mx", -1,
ifelse(data.anss$magtype == "Mh", -1,
ifelse(data.anss$magtype == "Mc",0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Unk", -1, -2)))))))
#FIXME: Why do I have bad values?
data.anss <- subset(data.anss, data.anss$emw > 0)
# Date formatting
data.neic$datetime <- ISOdatetime(data.neic$y, data.neic$m, data.neic$d, data.neic$h, data.neic$m.1, data.neic$s, tz = "")
stations.iris$start <- strptime(stations.iris$start,format="%Y-%m-%dT%H:%M:%OS")
stations.iris$end <- strptime(stations.iris$end,format="%Y-%m-%dT%H:%M:%OS")
setwd("~/LU 15-16/Fall 2015/EES 293/R Code/Git Clone")
library(ggplot2)
library(maps)
library(dplyr)
library(plyr)
data.neic <- read.table("../../2014_NEIC_declustered.c4.csv", header = TRUE, sep = ",")
data.anss <- read.table("../../anss.csv", header = TRUE, sep = ",")
colnames(data.anss) <- c("datetime","lat","lon","dp.km","mag","magtype","nbstations", "gap", "distance", "rms", "source", "eventid")
stations.iris <- read.table("../../out_fetchmdata_sept15", header = FALSE, sep = "|")
colnames(stations.iris) <- c("net","sta","loc","chan","lat","lon","elev","depth","azimuth","dip","instrument","scale","scalefreq","scaleunits","samplerate","start","end")
# Magnitude to mw
data.anss$emw <- ifelse(data.anss$magtype == "ML", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mb", 0.7813*data.anss$mag + 1.5175,
ifelse(data.anss$magtype == "Md", 0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Mx", -1,
ifelse(data.anss$magtype == "Mh", -1,
ifelse(data.anss$magtype == "Mc",0.806*data.anss$mag + 0.633,
ifelse(data.anss$magtype == "Unk", -1, -2)))))))
#FIXME: Why do I have bad values?
data.anss <- subset(data.anss, data.anss$emw > 0)
# Date formatting
data.neic$datetime <- ISOdatetime(data.neic$y, data.neic$m, data.neic$d, data.neic$h, data.neic$m.1, data.neic$s, tz = "")
stations.iris$start <- strptime(stations.iris$start,format="%Y-%m-%dT%H:%M:%OS")
stations.iris$end <- strptime(stations.iris$end,format="%Y-%m-%dT%H:%M:%OS")
